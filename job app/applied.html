<!DOCTYPE html>
<html>
<body style="font-family:Arial;text-align:center;margin-top:100px">

<h2>Applied Jobs</h2>
<div id="jobs"></div>

<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

<script>

const firebaseConfig = {
  apiKey: "AIzaSyBvJGcM5bKgsdaiTSP4yytC-6Kldc-J35I",
  authDomain: "job-app-683fa.firebaseapp.com",
  projectId: "job-app-683fa",
  storageBucket: "job-app-683fa.firebasestorage.app",
  messagingSenderId: "951123608239",
  appId: "1:951123608239:web:1e75570a094bc98b2b4a5a"
};
firebase.initializeApp(firebaseConfig);

const db = firebase.firestore();
const auth = firebase.auth();

auth.onAuthStateChanged(user=>{

if(!user){
document.body.innerHTML="Login first";
return;
}

db.collection("users")
.doc(user.uid)
.collection("appliedJobs")
.get()
.then(snapshot=>{

let output="";

snapshot.forEach(doc=>{
let job = doc.data();

output += `
<div style="border:1px solid #ccc;padding:15px;margin:15px">
<h3>${job.title}</h3>
</div>
`;
});

document.getElementById("jobs").innerHTML =
output || "No applied jobs yet";

});

});

</script>

</body>
</html>