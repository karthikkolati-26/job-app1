<!DOCTYPE html>
<html>
<head>
<title>Resume Matcher</title>

<style>
body{
font-family:Arial;
background:linear-gradient(135deg,#667eea,#764ba2);
display:flex;
justify-content:center;
align-items:center;
height:100vh;
margin:0;
}

.card{
background:white;
padding:30px;
border-radius:15px;
text-align:center;
width:350px;
box-shadow:0 10px 25px rgba(0,0,0,0.2);
}

button{
padding:12px;
border:none;
background:#667eea;
color:white;
border-radius:8px;
cursor:pointer;
width:100%;
}

button:hover{
background:#5a67d8;
}

.result{
margin-top:20px;
}

.job{
border:1px solid #eee;
padding:15px;
margin-top:10px;
border-radius:10px;
}
</style>

</head>

<body>

<div class="card">

<h2>Upload Resume</h2>

<input type="file" id="resume">
<br><br>

<button onclick="readResume()">Scan Resume</button>

<div id="result" class="result"></div>

</div>


<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>

<script>

const firebaseConfig = {
  apiKey: "AIzaSyBvJGcM5bKgsdaiTSP4yytC-6Kldc-J35I",
  authDomain: "job-app-683fa.firebaseapp.com",
  projectId: "job-app-683fa",
  storageBucket: "job-app-683fa.firebasestorage.app",
  messagingSenderId: "951123608239",
  appId: "1:951123608239:web:1e75570a094bc98b2b4a5a"
};

firebase.initializeApp(firebaseConfig);
const db=firebase.firestore();

function readResume(){

let file=document.getElementById("resume").files[0];

if(!file){
alert("Upload resume first");
return;
}

let reader=new FileReader();

reader.onload=function(e){
let text=e.target.result.toLowerCase();
matchJobs(text);
};

reader.readAsText(file);
}


function matchJobs(resumeText){

let jobs=[];

db.collection("jobs").get().then(snapshot=>{

snapshot.forEach(doc=>{

let job=doc.data();

let matchSkills=job.skills.filter(skill =>
resumeText.includes(skill.toLowerCase())
);

let score=Math.round((matchSkills.length/job.skills.length)*100);

if(score>0){
jobs.push({
title:job.title,
score:score,
skills:matchSkills
});
}

});

jobs.sort((a,b)=>b.score-a.score);

let output="";

jobs.slice(0,3).forEach(job=>{
output+=`
<div class="job">
<h3>${job.title}</h3>
<p>Match Score: <b>${job.score}%</b></p>
<p>${job.skills.join(", ")}</p>
</div>
`;
});

document.getElementById("result").innerHTML=
output||"No matching jobs found";

});
}

</script>

</body>
</html>